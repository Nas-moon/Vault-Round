<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Vault Unlock Game</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background-color: #f0f0f0; }
    .vault-container { display: flex; justify-content: center; gap: 30px; margin-top: 50px; }
    .vault { padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.2); width: 250px; background: white; }
    .vault h2 { margin-bottom: 15px; }
    input[type="text"] { padding: 10px; width: 80%; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 5px; }
    button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin-top: 5px; }
    .scoreboard { margin-top: 40px; }
    .back-btn { margin-top: 30px; display: inline-block; padding: 10px 15px; background: #555; color: white; border-radius: 5px; text-decoration: none; }
    #scoreHistory { text-align: left; margin-top: 20px; max-width: 700px; margin-left: auto; margin-right: auto; background: #fff; padding: 20px; border-radius: 10px; }
  </style>
</head>
<body>
  <h1>üîê The Vault Challenge üîê</h1>
  <label for="team-select">Select Your Team:</label>
  <select id="team-select">
    <option value="">--Choose--</option>
    <option value="team1">Team Alpha</option>
    <option value="team2">Team Beta</option>
    <option value="team3">Team Gamma</option>
    <option value="team4">Team Delta</option>
  </select>

  <div class="vault-container">
    <div class="vault" id="red-vault">
      <h2 style="color: red">Red Vault</h2>
      <input type="text" id="input-red" placeholder="Enter passcode">
      <button id="unlock-btn-red" onclick="attemptVault('red')">Unlock</button>
      <button id="try-again-red" onclick="tryAgain('red')" style="display:none;">Try Again</button>
      <p id="message-red"></p>
    </div>

    <div class="vault" id="blue-vault">
      <h2 style="color: blue">Blue Vault</h2>
      <input type="text" id="input-blue" placeholder="Enter passcode">
      <button id="unlock-btn-blue" onclick="attemptVault('blue')">Unlock</button>
      <button id="try-again-blue" onclick="tryAgain('blue')" style="display:none;">Try Again</button>
      <p id="message-blue"></p>
    </div>

    <div class="vault" id="yellow-vault">
      <h2 style="color: goldenrod">Yellow Vault</h2>
      <input type="text" id="input-yellow" placeholder="Enter passcode">
      <button id="unlock-btn-yellow" onclick="attemptVault('yellow')">Unlock</button>
      <button id="try-again-yellow" onclick="tryAgain('yellow')" style="display:none;">Try Again</button>
      <p id="message-yellow"></p>
    </div>
  </div>

  <div class="scoreboard">
    <h2>Scoreboard History</h2>
    <div id="scoreHistory">No attempts yet.</div>
  </div>

  <a href="index.html" class="back-btn">‚¨Ö Back</a>

  <script>
    const correctCodes = { red: "145", blue: "802", yellow: "376" };
    const gameState = {};
    const teamNames = ["--Choose--", "Team Alpha", "Team Beta", "Team Gamma", "Team Delta"];

    function attemptVault(vault) {
      const inputField = document.getElementById(`input-${vault}`);
      const input = inputField.value.trim();
      const message = document.getElementById(`message-${vault}`);
      const unlockBtn = document.getElementById(`unlock-btn-${vault}`);
      const tryAgainBtn = document.getElementById(`try-again-${vault}`);
      const selector = document.getElementById("team-select");
      const teamKey = selector.value;

      if (!teamKey) {
        alert("Please select a team first.");
        return;
      }

      if (!gameState[teamKey]) {
        gameState[teamKey] = {
          name: teamNames[selector.selectedIndex],
          attempts: { red: 3, blue: 3, yellow: 3 },
          unlocked: { red: false, blue: false, yellow: false },
          history: []
        };
      }

      const team = gameState[teamKey];

      if (team.unlocked[vault]) {
        message.textContent = "Vault already unlocked!";
        return;
      }

      if (team.attempts[vault] <= 0) {
        message.textContent = "No attempts left!";
        return;
      }

      // disable unlock button briefly to avoid double-clicking
      unlockBtn.disabled = true;
      setTimeout(() => { unlockBtn.disabled = false; }, 1000);

      if (input === correctCodes[vault]) {
        message.textContent = "‚úÖ Correct code! Vault unlocked.";
        team.unlocked[vault] = true;
        inputField.style.display = "none";
        unlockBtn.style.display = "none";
        tryAgainBtn.style.display = "none";
      } else {
        team.attempts[vault]--;
        message.textContent = `‚ùå Wrong code. Attempts left: ${team.attempts[vault]}`;
        inputField.style.display = "none";
        unlockBtn.style.display = "none";
        tryAgainBtn.style.display = "inline-block";
      }

      team.history.push(`${team.name} tried ${vault.toUpperCase()} Vault: ${input} ‚ûú ${input === correctCodes[vault] ? '‚úÖ' : '‚ùå'}`);
      updateScoreboard();
    }

    function tryAgain(vault) {
      document.getElementById(`input-${vault}`).style.display = "inline-block";
      document.getElementById(`unlock-btn-${vault}`).style.display = "inline-block";
      document.getElementById(`try-again-${vault}`).style.display = "none";
      document.getElementById(`message-${vault}`).textContent = "";
    }

    function updateScoreboard() {
      const scoreDiv = document.getElementById("scoreHistory");
      let historyHTML = "";
      for (let teamKey in gameState) {
        const team = gameState[teamKey];
        historyHTML += `<h4>${team.name}</h4><ul>`;
        for (let line of team.history) {
          historyHTML += `<li>${line}</li>`;
        }
        historyHTML += `</ul>`;
      }
      scoreDiv.innerHTML = historyHTML || "No attempts yet.";
    }
  </script>
</body>
</html>

